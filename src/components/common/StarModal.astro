---
---

<div id="star-modal" class="fixed inset-0 z-50 hidden" aria-hidden="true">
  <div class="absolute inset-0 bg-black/50 backdrop-blur-sm" data-star-modal-close></div>
  <div class="relative flex min-h-full items-center justify-center p-4">
    <div class="w-full max-w-md rounded-2xl border border-slate-200/70 bg-white/95 p-6 shadow-2xl dark:border-slate-800 dark:bg-slate-900/95">
      <div class="flex items-start justify-between gap-4">
        <div>
          <p class="text-xs font-semibold uppercase tracking-widest text-slate-500 dark:text-slate-400">感谢支持</p>
          <h3 class="mt-2 text-lg font-semibold text-slate-900 dark:text-slate-100">欢迎 Star 玄盾所有开源产品</h3>
          <p class="mt-2 text-sm text-slate-600 dark:text-slate-300">
            您的支持是我们持续开发与开源的动力。
          </p>
        </div>
        <button
          type="button"
          class="rounded-full p-2 text-slate-500 hover:bg-slate-100 hover:text-slate-700 dark:text-slate-400 dark:hover:bg-slate-800 dark:hover:text-slate-200"
          data-star-modal-close
          aria-label="关闭"
        >
          ✕
        </button>
      </div>
      <div class="mt-6 flex flex-col-reverse gap-3 sm:flex-row sm:justify-end">
        <button
          type="button"
          class="rounded-full border border-slate-200 px-4 py-2 text-sm font-medium text-slate-600 hover:bg-slate-50 dark:border-slate-700 dark:text-slate-300 dark:hover:bg-slate-800"
          data-star-modal-close
        >
          稍后
        </button>
        <button
          type="button"
          class="rounded-full bg-slate-900 px-4 py-2 text-sm font-semibold text-white hover:bg-slate-800 dark:bg-white dark:text-slate-900 dark:hover:bg-slate-100"
          data-star-modal-confirm
        >
          去点个 Star 
        </button>
      </div>
    </div>
  </div>
</div>

<script>
  const modal = document.querySelector('#star-modal');
  const openButtons = document.querySelectorAll('[data-star-modal]');
  let pendingUrl = '';

  const openModal = (url) => {
    pendingUrl = url || '';
    if (!modal) return;
    modal.classList.remove('hidden');
    modal.setAttribute('aria-hidden', 'false');
    document.body.classList.add('overflow-hidden');
  };

  const closeModal = () => {
    if (!modal) return;
    modal.classList.add('hidden');
    modal.setAttribute('aria-hidden', 'true');
    document.body.classList.remove('overflow-hidden');
  };

  openButtons.forEach((btn) => {
    btn.addEventListener('click', (event) => {
      event.preventDefault();
      const url = btn.getAttribute('href') || btn.dataset.starUrl || '';
      openModal(url);
    });
  });

  modal?.addEventListener('click', (event) => {
    const target = event.target;
    if (!(target instanceof HTMLElement)) return;
    if (target.hasAttribute('data-star-modal-close')) {
      closeModal();
    }
    if (target.hasAttribute('data-star-modal-confirm')) {
      if (pendingUrl) {
        window.open(pendingUrl, '_blank', 'noopener,noreferrer');
      }
      closeModal();
    }
  });

  window.addEventListener('keydown', (event) => {
    if (event.key === 'Escape') closeModal();
  });
</script>
